# ====================================
# DocFlow - Docker Compose Environment (TEMPLATE)
# ====================================
# Copiar este archivo a .env y modificar los valores según sea necesario.
# cp .env.example .env
#
# IMPORTANTE: El archivo .env contiene credenciales sensibles y NO debe
# ser commiteado al repositorio (ya está en .gitignore).

# ====================================
# INFRAESTRUCTURA
# ====================================

# ------------------------------------
# PostgreSQL Configuration
# ------------------------------------
# Base de datos relacional para Identity Service y Document Core Service
POSTGRES_VERSION=16-alpine
POSTGRES_PORT=5432
POSTGRES_USER=docflow
POSTGRES_PASSWORD=docflow_secret
POSTGRES_DB=docflow

# ------------------------------------
# MongoDB Configuration
# ------------------------------------
# Base de datos NoSQL para Audit Log Service (fase futura)
MONGO_VERSION=7.0
MONGO_PORT=27017
MONGO_DATABASE=auditlog

# ------------------------------------
# MinIO Configuration (S3-Compatible)
# ------------------------------------
# Object Storage compatible con S3 para almacenamiento de documentos
MINIO_VERSION=RELEASE.2024-01-01T16-36-33Z
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_DEFAULT_BUCKET=docflow-documents

# ------------------------------------
# Redis Configuration
# ------------------------------------
# Cache en memoria para Document Core Service (fase futura)
REDIS_VERSION=7-alpine
REDIS_PORT=6379

# ------------------------------------
# Kafka Configuration (KRaft Mode)
# ------------------------------------
# Message Broker para eventos entre microservicios (fase futura)
# KRaft mode: sin dependencia de Zookeeper
KAFKA_VERSION=3.7.0
KAFKA_PORT=9092
KAFKA_CONTROLLER_PORT=9093
KAFKA_CLUSTER_ID=MkU3OEVBNTcwNTJENDM2Qk

# ------------------------------------
# Kafka UI Configuration
# ------------------------------------
# Interfaz web para monitorear Kafka (fase futura)
KAFKA_UI_VERSION=latest
KAFKA_UI_PORT=9090

# ------------------------------------
# HashiCorp Vault Configuration
# ------------------------------------
# Gestión de secretos (modo desarrollo) (fase futura)
# ADVERTENCIA: En producción, no usar modo dev ni token 'root'
VAULT_VERSION=1.17
VAULT_PORT=8200
VAULT_DEV_ROOT_TOKEN=root
VAULT_DEV_LISTEN_ADDRESS=0.0.0.0:8200

# ====================================
# BACKEND SERVICES
# ====================================
# NOTA DE SEGURIDAD: Solo el Gateway expone puerto externamente.
# Identity y Document Core son accesibles solo internamente vía Gateway.

# ------------------------------------
# Gateway Service (Único punto de entrada backend)
# ------------------------------------
GATEWAY_PORT=8080
GATEWAY_JAVA_OPTS=-Xmx512m -Xms256m

# ------------------------------------
# Identity Service (NO expuesto externamente)
# ------------------------------------
# Puerto interno: 8081 (solo accesible dentro de la red Docker)
IDENTITY_JAVA_OPTS=-Xmx512m -Xms256m

# ------------------------------------
# Document Core Service (NO expuesto externamente)
# ------------------------------------
# Puerto interno: 8082 (solo accesible dentro de la red Docker)
DOCUMENT_JAVA_OPTS=-Xmx512m -Xms256m

# ====================================
# FRONTEND
# ====================================

FRONTEND_PORT=80
# URL del Gateway para el frontend (usado en build-time)
VITE_API_BASE_URL=http://localhost:8080

# ====================================
# SEGURIDAD
# ====================================

# ------------------------------------
# JWT Configuration
# ------------------------------------
# IMPORTANTE: Cambiar en producción a un secreto seguro de al menos 256 bits
JWT_SECRET=docflow-secret-key-change-this-in-production-min-256-bits-required-for-security
JWT_EXPIRATION=86400000
JWT_ISSUER=docflow-identity-service

# ------------------------------------
# CORS Configuration
# ------------------------------------
# Lista separada por comas de orígenes permitidos
# Para desarrollo local (Vite dev server y build estático)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost

# Para producción, cambiar a:
# CORS_ALLOWED_ORIGINS=https://app.docflow.com,https://admin.docflow.com

# ====================================
# NOTAS DE SEGURIDAD
# ====================================
# 
# 1. NO usar estos valores en producción
# 2. NO commitear credenciales reales al repositorio
# 3. Usar gestor de secretos en producción (AWS Secrets Manager, Azure Key Vault, etc.)
# 4. Rotar secretos periódicamente
# 5. Usar HTTPS en producción
# 6. Limitar CORS_ALLOWED_ORIGINS a dominios específicos
